<div class="container mt-4">
  <h4>üìã Reporte de Operaciones Relevantes (Mensual)</h4>

  <form [formGroup]="reporteForm" class="row g-3">
    <div class="col-md-2">
      <label>A√±o</label>
      <input type="number" formControlName="anio" class="form-control" />
    </div>

    <div class="col-md-3">
      <label>Mes</label>
      <select class="form-select" formControlName="mes" (change)="actualizarFechas()">
        <option [ngValue]="null">Seleccione...</option>
        <option *ngFor="let m of meses" [value]="m.id">{{ m.nombre }}</option>
      </select>
    </div>

    <div class="col-md-3">
      <label>Clave del Sujeto</label>
      <input type="text" formControlName="clave_sujeto" class="form-control" />
    </div>

    <div class="col-md-2">
      <label>√ìrgano Supervisor</label>
      <input type="text" formControlName="clave_organo" class="form-control" />
    </div>

    <div class="col-md-2 d-flex align-items-end gap-2">
      <button class="btn btn-primary" type="button" (click)="buscarPreview()">üîç Vista previa</button>
      <!-- <button class="btn btn-success" type="button" (click)="generarReporte()">‚¨áÔ∏è Generar XML</button> -->
    </div>
  </form>

  <div class="mt-3" *ngIf="data.length">
    <h5>Resultados</h5>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Folio</th>
          <th>Fecha</th>
          <th>Cliente / Empresa</th>
          <th>RFC</th>
          <th>Tipo Operaci√≥n</th>
          <th>Moneda</th>
          <th>Descripci√≥n</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of data">
          <td>{{ row.folio }}</td>
          <td>{{ row.fecha_operacion }}</td>
          <td>{{ row.nombre }}</td>
          <td>{{ row.rfc }}</td>
          <td>{{ row.tipo_operacion }}</td>
          <td>{{ row.moneda }}</td>
          <td>{{ row.descripcion_operacion }}</td>
        </tr>
      </tbody>
    </table>

    <button class="btn btn-info" (click)="exportarCSV()">üì§ Exportar CSV</button>
  </div>
</div>
