<div class="container mt-4">

  <h3>Configuraci贸n de Alertas PLD</h3>
  <p class="text-muted">Actualiza solo los par谩metros permitidos por tipo de alerta.</p>

  <table class="table table-bordered table-striped mt-4">
    <thead class="table-dark">
      <tr>
        <th>Tipo</th>
        <th>Descripci贸n</th>
        <th>Valores</th>
        <th>Riesgo</th>
        <th>Acci贸n</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let cfg of lista">

        <td>{{ cfg.tipo_alerta }}</td>
        <td>{{ cfg.descripcion }}</td>

        <td>

          <!--  relevante -->
          <div *ngIf="cfg.tipo_alerta === 'relevante'">
            <label>Monto Umbral (USD):</label>
            <input class="form-control" type="number" [(ngModel)]="cfg.umbral_monto">
          </div>

          <!--  inusual -->
          <div *ngIf="cfg.tipo_alerta === 'inusual'">
            <label>Porcentaje (%):</label>
            <input class="form-control" type="number" [(ngModel)]="cfg.umbral_porcentaje">
          </div>

          <!--  preocupante -->
          <div *ngIf="cfg.tipo_alerta === 'preocupante'">
            <i>No requiere configuraci贸n adicional.</i>
          </div>

          <!--  fraccionada -->
          <div *ngIf="cfg.tipo_alerta === 'fraccionada'">
            <label>Umbral acumulado (USD):</label>
            <input class="form-control" type="number" [(ngModel)]="cfg.umbral_fraccionamiento">

            <label class="mt-2">Periodo (d铆as):</label>
            <input class="form-control" type="number" [(ngModel)]="cfg.periodo_fraccionamiento">
          </div>

          <!--  cambio_datos -->
          <div *ngIf="cfg.tipo_alerta === 'cambio_datos'">
            <label>Porcentaje requerido:</label>
            <input class="form-control" type="number" [(ngModel)]="cfg.umbral_porcentaje">
          </div>

        </td>

        <td>{{ cfg.nivel_riesgo }}</td>

        <td>
          <button class="btn btn-primary btn-sm" (click)="guardar(cfg)">
            Actualizar
          </button>
        </td>

      </tr>
    </tbody>
  </table>

</div>
